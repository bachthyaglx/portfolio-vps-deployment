"use strict";exports.id=272,exports.ids=[272],exports.modules={5272:(e,t,l)=>{l.d(t,{Z:()=>x});var a=l(326),s=l(9167),n=l(8753),r=l(8358),i=l(7577),d=l(1752);let c=function(e){if(!e)return"N/A";let t=new Date("string"==typeof e?Date.parse(e):Number(e));return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"short"})};function o({isOpen:e,onClose:t,onSuccess:l,initialData:s,fields:r,fileFields:d=[],createMutation:c,editMutation:o,uploadMutation:x,deleteFileMutation:m}){let[u,p]=(0,i.useState)({}),[h,g]=(0,i.useState)({}),[f,j]=(0,i.useState)({}),[b,v]=(0,i.useState)({}),N=(0,i.useRef)({}),[y]=(0,n.D)(c),[w]=(0,n.D)(o),[k]=(0,n.D)(x),[D]=(0,n.D)(m),C=e=>{p({...u,[e.target.name]:e.target.value})},S=(e,t)=>{let l=f[e][t];v(t=>({...t,[e]:[...t[e]||[],l]})),j(l=>({...l,[e]:l[e].filter((e,l)=>l!==t)}))},$=async e=>{e.preventDefault();try{let e={...f};for(let t of d){let l=t.name;if(b[l]?.length&&await Promise.all(b[l].map(e=>D({variables:{fileUrl:e}}))),h[l]?.length){let a="singleupload"===t.mode?{file:h[l][0]}:{files:h[l]},s=await k({variables:a}),n="singleupload"===t.mode?[s?.data?.singleUpload]:s?.data?.multiUpload||[];e[l]="singleupload"===t.mode?n:[...e[l]||[],...n]}}let a={...u};r.find(e=>"skills"===e.name)&&(a.skills=Array.isArray(u.skills)?u.skills:u.skills.split(",").map(e=>e.trim())),d.forEach(({name:t,mode:l})=>{a[t]="singleupload"===l?e[t]?.[0]||"":e[t]||[]}),u.dateAchieved&&(a.dateAchieved=new Date(u.dateAchieved).toISOString()),s?.id?await w({variables:{id:s.id,input:a}}):await y({variables:{input:a}}),v({}),l(),t()}catch(e){console.error("❌ Submit error:",e),alert(e.message||"❌ Failed to submit")}};return e?(0,a.jsxs)("form",{onSubmit:$,className:"space-y-4 max-h-[80vh] overflow-y-auto p-4",children:[r.map(e=>"textarea"===e.type?a.jsx("textarea",{name:e.name,value:u[e.name]||"",onChange:C,className:"w-full border px-3 py-2 rounded text-black min-h-[150px]",placeholder:e.label,required:e.required},e.name):a.jsx("input",{name:e.name,type:e.type,value:u[e.name]||"",onChange:C,className:"w-full border px-3 py-2 rounded text-black",placeholder:e.label,required:e.required},e.name)),d.map(({name:e,label:t,mode:l})=>(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block mb-1",children:[t," ",a.jsx("i",{children:"(optional)"})]}),a.jsx("input",{ref:t=>{N.current[e]=t},type:"file",accept:".pdf,image/*",multiple:"multiupload"===l,onChange:t=>{let a=Array.from(t.target.files||[]);g(t=>{let s=t[e]||[];return{...t,[e]:"singleupload"===l?a:[...s,...a.filter(e=>!s.some(t=>t.name===e.name))]}}),"singleupload"===l&&j(t=>({...t,[e]:[]}))},className:"mt-2"}),(f[e]?.length>0||h[e]?.length>0)&&(0,a.jsxs)("ul",{className:"mt-2 text-sm text-black space-y-2",children:[f[e]?.map((t,l)=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"underline break-all text-blue-600",children:t.split("/").pop()}),a.jsx("button",{type:"button",onClick:()=>S(e,l),className:"text-red-500 text-xs hover:underline",children:"❌"})]},`${e}-url-${l}-${t}`)),h[e]?.map((t,l)=>a.jsx("li",{children:t.name},`${e}-file-${l}-${t.name}`))]})]},e)),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{type:"button",onClick:t,className:"text-gray-600 hover:underline",children:"Cancel"}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:s?"Update":"Submit"})]})]}):null}function x({pageTitle:e,query:t,deleteMutation:l,dataKey:x,textFields:m,fileFields:u=[],formFields:p,formTitle:h,createMutation:g,editMutation:f,uploadMutation:j,deleteFileMutation:b}){let{data:v,loading:N,refetch:y}=(0,s.aM)(t),[w]=(0,n.D)(l),k=(0,r.n)(),[D,C]=(0,i.useState)(!1),[S,$]=(0,i.useState)(null),[A,F]=(0,i.useState)(!1),[L,M]=(0,i.useState)(null),[U,_]=(0,i.useState)(!1),q=async e=>{await w({variables:{id:e}}),M(null),y()},O=v?.[x]||[];return a.jsx("div",{className:"bg-slate-900 text-white min-h-screen pt-24 px-6 desktop:px-20",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-10 pl-4",children:e}),N&&a.jsx("p",{className:"pl-4",children:"Loading..."}),O.map(e=>a.jsx("div",{className:"group block rounded-lg p-4 transition hover:bg-slate-700 hover:-translate-x-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:`pt-1 text-sm text-slate-400 leading-snug ${U?"max-w-[90px]":"whitespace-nowrap"}`,children:(()=>{let t=m.start?e[m.start]:null,l=m.end?e[m.end]:null,s=t?c(t):null,n=l?c(l):null;return n||(s&&n?U?(0,a.jsxs)(a.Fragment,{children:[s,a.jsx("div",{className:"text-center",children:"–"}),n]}):(0,a.jsxs)(a.Fragment,{children:[s," – ",n]}):void 0)})()}),(0,a.jsxs)("div",{className:"flex-1 w-full min-w-0 space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-white group-hover:text-cyan-300 transition",children:[e[m.title]," ",m.subtitle&&e[m.subtitle]&&(0,a.jsxs)("span",{className:"text-cyan-300",children:["@ ",e[m.subtitle]]})]}),k&&(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{className:"text-xs text-yellow-400 hover:underline",onClick:()=>{$(e),C(!0)},children:"Edit"}),a.jsx("button",{className:"text-xs text-red-400 hover:underline",onClick:()=>M(e.id),children:"Delete"})]})]}),u.length>0&&(0,a.jsxs)("div",{className:"text-sm text-cyan-400 flex flex-wrap gap-4",children:[m.program?e[m.program]:"",u.map(({name:t,label:l,mode:s})=>{let n=e[t];return n?"singleupload"===s?(0,a.jsxs)("div",{className:"text-sm text-center",children:["\uD83D\uDCDD ",a.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:underline",children:l})]},`${t}-${e.id}`):"multiupload"===s&&Array.isArray(n)?n.map((s,n)=>{let r=s.split(".").pop()?.toLowerCase();return/jpeg|jpg|png|gif|webp/.test(r||"")?null:(0,a.jsxs)("div",{className:"text-sm text-center",children:["\uD83D\uDCDD ",(0,a.jsxs)("a",{href:s,target:"_blank",rel:"noreferrer",className:"hover:underline",children:[l,"_",n+1]})]},`${t}-${e.id}-${n}`)}):void 0:null})]}),m.description&&e[m.description]&&a.jsx("div",{className:"text-slate-300 text-sm space-y-1",children:e[m.description].split(/(?<=\.)\s+(?=-)/g).map((e,t)=>a.jsx("p",{children:e.trim()},`desc-line-${t}`))}),m.tags&&e[m.tags]&&Array.isArray(e[m.tags])&&a.jsx("div",{className:"flex flex-wrap gap-2",children:e[m.tags].map((e,t)=>a.jsx("span",{className:"bg-teal-400/10 text-teal-300 px-3 py-1 text-xs rounded-full font-medium",children:e},`tag-${e}-${t}`))}),u.length>0&&a.jsx("div",{className:"pt-4 flex flex-wrap gap-4",children:u.map(({name:t,mode:l})=>{let s=e[t];return Array.isArray(s)?s.map((e,l)=>{let s=e.split(".").pop()?.toLowerCase(),n=/jpeg|jpg|png|gif|webp/.test(s||"");return(/\.pdf$/i.test(e),n)?a.jsx("div",{className:"rounded overflow-hidden w-[370px] hover:shadow-xl transition-transform duration-200",children:a.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"block hover:scale-105 transition-transform duration-200",children:a.jsx("img",{src:e,alt:"file",className:"w-[370px] h-auto object-contain"})})},`${t}-img-${l}`):null}):null})})]})]})},e.id)),k&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"flex justify-center mt-6",children:(0,a.jsxs)("button",{onClick:()=>{C(!0),$(null)},className:"text-cyan-400 hover:underline text-sm",children:["➕ ",h?.add||"Add item"]})}),D&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex justify-center items-center",onClick:()=>C(!1),children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-xl max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:S?h?.edit:h?.add}),a.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-red-600 text-lg font-bold",children:"\xd7"})]}),a.jsx(o,{isOpen:!0,onClose:()=>C(!1),onSuccess:()=>{C(!1),y()},initialData:S,fields:p,fileFields:u,createMutation:g,editMutation:f,uploadMutation:j,deleteFileMutation:b})]})})]}),L&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-lg p-6",children:[a.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this item?"}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[a.jsx("button",{onClick:()=>M(null),className:"text-gray-600 hover:underline",children:"No"}),a.jsx("button",{onClick:()=>q(L),className:"text-red-600 hover:underline",children:"Yes"})]})]})}),a.jsx(d.Z,{isOpen:A,onClose:()=>F(!1),onLoginSuccess:()=>F(!1)})]})})}}};