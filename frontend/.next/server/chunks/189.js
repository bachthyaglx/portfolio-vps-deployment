"use strict";exports.id=189,exports.ids=[189],exports.modules={9189:(e,t,l)=>{l.d(t,{a:()=>F});var a=l(326),s=l(7577),n=l(8753),r=l(6723);function i({name:e,type:t,value:l,onChange:s,placeholder:n,required:r}){return a.jsx("input",{name:e,type:t,value:l||"",onChange:s,className:"w-full border px-3 py-2 rounded text-black",placeholder:n,required:r})}function o({name:e,value:t,onChange:l,placeholder:s,required:n}){return a.jsx("textarea",{name:e,value:t||"",onChange:l,className:"w-full border px-3 py-2 rounded text-black min-h-[150px]",placeholder:s,required:n})}function d({name:e,value:t,onChange:l,required:s,options:n,label:r}){return(0,a.jsxs)("select",{name:e,value:t||"",onChange:l,className:"w-full border px-3 py-2 rounded text-black",required:s,children:[(0,a.jsxs)("option",{value:"",children:["-- Select ",r," --"]}),n.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})}function c({name:e,label:t,mode:l,inputRef:s,onChange:n,fileUrls:r,fileInputs:i,onRemoveFileUrl:o}){return(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{className:"block mb-1",children:[t," ",a.jsx("i",{children:"(optional)"})]}),a.jsx("input",{ref:s,type:"file",accept:".pdf,image/*",multiple:"multiupload"===l,onChange:n,className:"mt-2"}),(r.length>0||i.length>0)&&(0,a.jsxs)("ul",{className:"mt-2 text-sm text-black space-y-2",children:[r.map((t,l)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"underline break-all text-blue-600",children:t.split("/").pop()}),a.jsx("button",{type:"button",onClick:()=>o(l),className:"text-red-500 text-xs hover:underline",children:"❌"})]},`${e}-url-${l}-${t}`)),i.map((t,l)=>a.jsx("li",{children:t.name},`${e}-file-${l}-${t.name}`))]})]})}function u({onClose:e,isEdit:t}){return(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{type:"button",onClick:e,className:"text-gray-600 hover:underline",children:"Cancel"}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:t?"Update":"Submit"})]})}function x({isOpen:e,onClose:t,onSuccess:l,initialData:x,fields:m,fileFields:p=[],createMutation:h,editMutation:f,uploadFileMutation:g,deleteFileMutation:j}){let[b,v]=(0,s.useState)({}),[N,w]=(0,s.useState)({}),[y,k]=(0,s.useState)({}),[C,D]=(0,s.useState)({}),S=(0,s.useRef)({}),[F]=(0,n.D)(h),[$]=(0,n.D)(f),[A]=(0,n.D)(g??r.Bp),[q]=(0,n.D)(j??r.Bp),M=e=>{v({...b,[e.target.name]:e.target.value})},L=(e,t)=>{let l=y[e][t];D(t=>({...t,[e]:[...t[e]||[],l]})),k(l=>({...l,[e]:l[e].filter((e,l)=>l!==t)}))},U=async e=>{e.preventDefault();try{let e={...y};for(let t of p){let l=t.name;if(C[l]?.length&&j&&await Promise.all(C[l].map(e=>q({variables:{fileUrl:e}}))),N[l]?.length&&g){let a="singleupload"===t.mode?{file:N[l][0]}:{files:N[l]},s=await A({variables:a}),n="singleupload"===t.mode?[s?.data?.singleUpload]:s?.data?.multiUpload||[];e[l]="singleupload"===t.mode?n:[...e[l]||[],...n]}}let a={...b};m.find(e=>"skills"===e.name)&&(a.skills=Array.isArray(b.skills)?b.skills:b.skills.split(",").map(e=>e.trim())),p.forEach(({name:t,mode:l})=>{a[t]="singleupload"===l?e[t]?.[0]||"":e[t]||[]}),b.dateAchieved&&(a.dateAchieved=new Date(b.dateAchieved).toISOString()),x?.id?await $({variables:{id:x.id,input:a}}):await F({variables:{input:a}}),D({}),l(),t()}catch(e){console.error("❌ Submit error:",e),alert(e.message||"❌ Failed to submit")}};return e?(0,a.jsxs)("form",{onSubmit:U,className:"space-y-4 max-h-[80vh] overflow-y-auto p-4",children:[m.map(e=>"textarea"===e.type?a.jsx(o,{name:e.name,value:b[e.name],onChange:M,placeholder:e.label,required:e.required},e.name):"select"===e.type?a.jsx(d,{name:e.name,value:b[e.name],onChange:M,required:e.required,options:e.options||[],label:e.label,placeholder:e.label},e.name):a.jsx(i,{name:e.name,type:e.type,value:b[e.name],onChange:M,placeholder:e.label,required:e.required},e.name)),p.map(({name:e,label:t,mode:l})=>a.jsx(c,{name:e,label:t,mode:l,inputRef:t=>{S.current[e]=t},onChange:t=>{let a=Array.from(t.target.files||[]);w(t=>{let s=t[e]||[];return{...t,[e]:"singleupload"===l?a:[...s,...a.filter(e=>!s.some(t=>t.name===e.name))]}}),"singleupload"===l&&k(t=>({...t,[e]:[]}))},fileUrls:y[e]||[],fileInputs:N[e]||[],onRemoveFileUrl:t=>L(e,t)},e)),a.jsx(u,{onClose:t,isEdit:!!x})]}):null}let m=({isOpen:e,onClose:t,editItem:l,formTitle:s,formFields:n,fileFields:r,createMutation:i,editMutation:o,uploadFileMutation:d,deleteFileMutation:c,refetch:u})=>e?a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 centered-flex",onClick:t,children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-xl max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:l?s?.edit:s?.add}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-600 text-lg font-bold",children:"\xd7"})]}),a.jsx(x,{isOpen:!0,onClose:t,onSuccess:()=>{t(),u()},initialData:l,fields:n,fileFields:r,createMutation:i,editMutation:o,uploadFileMutation:d,deleteFileMutation:c})]})}):null;var p=l(9167);let h=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),f=()=>!!localStorage.getItem("app-user-token"),g=()=>(0,s.useSyncExternalStore)(h,f,()=>!1);var j=l(107);let b=function(e){if(!e)return"N/A";let t=new Date("string"==typeof e?Date.parse(e):Number(e));return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"short"})};function v({item:e,textFields:t}){let l=t.start?e[t.start]:null,s=t.end?e[t.end]:null,n=l?b(l):null,r=s?b(s):null;return n?a.jsx("div",{className:"pt-1 text-sm text-slate-400 leading-snug max-w-[90px] desktop:max-w-none",children:(0,a.jsxs)("div",{className:"flex flex-col desktop:flex-row desktop:whitespace-nowrap desktop:gap-1",children:[a.jsx("span",{children:n}),a.jsx("span",{className:"text-center",children:"–"}),a.jsx("span",{children:r??"Present"})]})}):null}function N({item:e,textFields:t}){return(0,a.jsxs)("h3",{className:"text-lg font-bold text-white group-hover:text-cyan-300 transition",children:[e[t.title]," ",t.subtitle&&e[t.subtitle]&&(0,a.jsxs)("span",{className:"text-cyan-300",children:["@ ",e[t.subtitle]]})]})}function w({item:e,textFields:t}){let l=t.url?e?.[t.url]:void 0;return l?a.jsx("a",{href:l,target:"_blank",rel:"noreferrer",className:"text-cyan-300 hover:underline text-sm block",children:"Github"}):null}function y({item:e,fileFields:t}){return a.jsx("div",{className:"text-sm text-cyan-400 flex flex-wrap gap-4",children:t.map(t=>{let{name:l,label:s,mode:n,display:r="file"}=t,i=e[l];if(!i)return null;let o=("singleupload"===n?[i]:Array.isArray(i)?i:[]).filter(e=>{let t=e.split(".").pop()?.toLowerCase();return!/jpeg|jpg|png|gif|webp/.test(t||"")});return o.map((t,n)=>{let i=`${l}-${e.id}-${n}`,d=1===o.length;return"iframe"===r?a.jsx("div",{className:"rounded overflow-hidden w-[370px] h-[320px] hover:shadow-xl transition-transform duration-200 cursor-pointer",children:a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",children:a.jsx("iframe",{src:t,title:i,className:"w-[370px] h-[320px] border-none pointer-events-none"})})},i):(0,a.jsxs)("div",{className:"text-sm text-center",children:["\uD83D\uDCDD"," ",a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"hover:underline",children:d?s:`${s}_${n+1}`})]},i)})})})}function k({item:e,textFields:t}){return t.description&&e[t.description]?a.jsx("div",{className:"text-slate-300 text-sm space-y-1",children:e[t.description].split(/\n+/g).map((e,t)=>a.jsx("p",{children:e.trim()},`desc-line-${t}`))}):null}function C({item:e,textFields:t}){return t.tags&&e[t.tags]&&Array.isArray(e[t.tags])?a.jsx("div",{className:"flex flex-wrap gap-2",children:e[t.tags].map((e,t)=>a.jsx("span",{className:"bg-teal-400/10 text-teal-300 px-3 py-1 text-xs rounded-full font-medium",children:e},`tag-${e}-${t}`))}):null}function D({item:e,fileFields:t}){return a.jsx("div",{className:"pt-4 flex flex-wrap gap-4",children:t.map(({name:t,mode:l})=>{let s=e[t];return Array.isArray(s)?s.map((e,l)=>{let s=e.split(".").pop()?.toLowerCase();return/jpeg|jpg|png|gif|webp/.test(s||"")?a.jsx("div",{className:"rounded overflow-hidden w-[370px] hover:shadow-xl transition-transform duration-200",children:a.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"block hover:scale-105 transition-transform duration-200",children:a.jsx("img",{src:e,alt:"file",className:"w-[370px] h-auto object-contain"})})},`${t}-img-${l}`):null}):null})})}function S({isOpen:e,onClose:t,onConfirm:l}){return e?a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 centered-flex",children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-lg p-6",children:[a.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this item?"}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[a.jsx("button",{onClick:t,className:"text-gray-600 hover:underline",children:"No"}),a.jsx("button",{onClick:l,className:"text-red-600 hover:underline",children:"Yes"})]})]})}):null}function F({pageTitle:e,query:t,deleteMutation:l,dataKey:r,textFields:i,fileFields:o=[],formFields:d,formTitle:c,createMutation:u,editMutation:x,uploadFileMutation:h,deleteFileMutation:f}){let{data:b,loading:F,refetch:$}=(0,p.aM)(t,{fetchPolicy:"cache-first"}),[A]=(0,n.D)(l),q=g(),[M,L]=(0,s.useState)(!1),[U,E]=(0,s.useState)(null),[_,I]=(0,s.useState)(!1),[O,P]=(0,s.useState)(null),T=async e=>{try{await A({variables:{id:e}}),P(null),$()}catch(e){console.error("Failed to delete item:",e),alert("Failed to delete item.")}},R=(b?.[r]||[]).slice().sort((e,t)=>{let l=new Date(i.end?e[i.end]||Date.now():0);return new Date(i.end?t[i.end]||Date.now():0).getTime()-l.getTime()});return a.jsx("div",{className:"page-container",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-10 pl-4",children:e}),F&&a.jsx("p",{className:"pl-4",children:"Loading..."}),R.map(e=>a.jsx("div",{className:"group block rounded-lg p-4 card-hover",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[a.jsx(v,{item:e,textFields:i}),(0,a.jsxs)("div",{className:"flex-1 w-full min-w-0 space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[a.jsx(N,{item:e,textFields:i}),q&&(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{className:"text-xs text-yellow-400 hover:underline",onClick:()=>{E(e),L(!0)},children:"Edit"}),a.jsx("button",{className:"text-xs text-red-400 hover:underline",onClick:()=>P(e.id),children:"Delete"})]})]}),a.jsx(w,{item:e,textFields:i}),a.jsx(y,{item:e,fileFields:o}),a.jsx(k,{item:e,textFields:i}),a.jsx(C,{item:e,textFields:i}),a.jsx(D,{item:e,fileFields:o})]})]})},e.id)),q&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"centered-flex mt-6 pb-6",children:(0,a.jsxs)("button",{onClick:()=>{L(!0),E(null)},className:"text-cyan-400 hover:underline text-sm",children:["➕ ",c?.add||"Add item"]})}),a.jsx(m,{isOpen:M,onClose:()=>L(!1),editItem:U,formTitle:c,formFields:d,fileFields:o,createMutation:u,editMutation:x,uploadFileMutation:h,deleteFileMutation:f,refetch:$})]}),a.jsx(S,{isOpen:!!O,onClose:()=>P(null),onConfirm:()=>O&&T(O)}),a.jsx(j.Z,{isOpen:_,onClose:()=>I(!1),onLoginSuccess:()=>I(!1)})]})})}}};