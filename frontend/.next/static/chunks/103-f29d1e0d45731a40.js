"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[103],{5545:function(e,n,t){t.d(n,{Z:function(){return c}});var i=t(7437),r=t(2199),l=t(3251),a=t(2265),s=t(6965);function o(e){let{onSuccess:n}=e,[t]=(0,r.D)(s.ym),o=(0,l.x)(),[c,u]=(0,a.useState)(""),[d,p]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),h=async e=>{e.preventDefault(),f(""),g(!0);try{var i;let{data:e}=await t({variables:{username:c,password:d}}),r=null==e?void 0:null===(i=e.login)||void 0===i?void 0:i.token;r?(localStorage.setItem("app-user-token",r),await o.resetStore(),window.dispatchEvent(new Event("storage")),n()):f("Invalid login credentials.")}catch(e){f("An error occurred during login.")}finally{g(!1)}};return(0,i.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,i.jsx)("input",{value:c,onChange:e=>u(e.target.value),placeholder:"Username",disabled:x,className:"w-full border px-3 py-2 rounded text-slate-900"}),(0,i.jsx)("input",{type:"password",value:d,onChange:e=>p(e.target.value),placeholder:"Password",disabled:x,className:"w-full border px-3 py-2 rounded text-slate-900"}),m&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:m}),(0,i.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:x?"Logging in...":"Login"})]})}function c(e){let{isOpen:n,onClose:t,onLoginSuccess:r}=e;return n?(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:t,children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:"absolute top-2 right-3 text-gray-500 hover:text-black text-xl font-bold",onClick:t,children:"\xd7"}),(0,i.jsx)(o,{onSuccess:()=>{t(),r()}})]})}):null}},8103:function(e,n,t){t.d(n,{Z:function(){return d}});var i=t(7437),r=t(7211),l=t(2199),a=t(8069),s=t(2265),o=t(5545),c=function(e){if(!e)return"N/A";let n=new Date("string"==typeof e?Date.parse(e):Number(e));return isNaN(n.getTime())?"Invalid Date":n.toLocaleDateString("en-US",{year:"numeric",month:"short"})};function u(e){let{isOpen:n,onClose:t,onSuccess:r,initialData:a,fields:o,fileFields:c=[],createMutation:u,editMutation:d,uploadMutation:p,deleteFileMutation:m}=e,[f,x]=(0,s.useState)({}),[g,h]=(0,s.useState)({}),[v,b]=(0,s.useState)({}),[j,y]=(0,s.useState)({}),w=(0,s.useRef)({}),[k]=(0,l.D)(u),[N]=(0,l.D)(d),[C]=(0,l.D)(p),[D]=(0,l.D)(m);(0,s.useEffect)(()=>{if(a){let e={};o.forEach(n=>{let t=a[n.name];"date"===n.type?e[n.name]=t?S(t):"":e[n.name]=null!=t?t:""}),x(e);let n={};c.forEach(e=>{let{name:t}=e,i=a[t];n[t]=Array.isArray(i)?i:i?[i]:[]}),b(n)}},[a,o,c]);let S=e=>e?new Date(e).toISOString().split("T")[0]:"",$=e=>{x({...f,[e.target.name]:e.target.value})},E=(e,n)=>{let t=v[e][n];y(n=>({...n,[e]:[...n[e]||[],t]})),b(t=>({...t,[e]:t[e].filter((e,t)=>t!==n)}))},U=async e=>{e.preventDefault();try{let e={...v};for(let t of c){var n,i,l,s;let r=t.name;if((null===(n=j[r])||void 0===n?void 0:n.length)&&await Promise.all(j[r].map(e=>D({variables:{fileUrl:e}}))),null===(i=g[r])||void 0===i?void 0:i.length){let n="singleupload"===t.mode?{file:g[r][0]}:{files:g[r]},i=await C({variables:n}),a="singleupload"===t.mode?[null==i?void 0:null===(l=i.data)||void 0===l?void 0:l.singleUpload]:(null==i?void 0:null===(s=i.data)||void 0===s?void 0:s.multiUpload)||[];e[r]="singleupload"===t.mode?a:[...e[r]||[],...a]}}let u={...f};o.find(e=>"skills"===e.name)&&(u.skills=Array.isArray(f.skills)?f.skills:f.skills.split(",").map(e=>e.trim())),c.forEach(n=>{var t;let{name:i,mode:r}=n;u[i]="singleupload"===r?(null===(t=e[i])||void 0===t?void 0:t[0])||"":e[i]||[]}),f.dateAchieved&&(u.dateAchieved=new Date(f.dateAchieved).toISOString()),(null==a?void 0:a.id)?await N({variables:{id:a.id,input:u}}):await k({variables:{input:u}}),y({}),r(),t()}catch(e){console.error("❌ Submit error:",e),alert(e.message||"❌ Failed to submit")}};return n?(0,i.jsxs)("form",{onSubmit:U,className:"space-y-4 max-h-[80vh] overflow-y-auto p-4",children:[o.map(e=>"textarea"===e.type?(0,i.jsx)("textarea",{name:e.name,value:f[e.name]||"",onChange:$,className:"w-full border px-3 py-2 rounded text-black min-h-[150px]",placeholder:e.label,required:e.required},e.name):(0,i.jsx)("input",{name:e.name,type:e.type,value:f[e.name]||"",onChange:$,className:"w-full border px-3 py-2 rounded text-black",placeholder:e.label,required:e.required},e.name)),c.map(e=>{var n,t,r,l;let{name:a,label:s,mode:o}=e;return(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("label",{className:"block mb-1",children:[s," ",(0,i.jsx)("i",{children:"(optional)"})]}),(0,i.jsx)("input",{ref:e=>{w.current[a]=e},type:"file",accept:".pdf,image/*",multiple:"multiupload"===o,onChange:e=>{let n=Array.from(e.target.files||[]);h(e=>{let t=e[a]||[];return{...e,[a]:"singleupload"===o?n:[...t,...n.filter(e=>!t.some(n=>n.name===e.name))]}}),"singleupload"===o&&b(e=>({...e,[a]:[]}))},className:"mt-2"}),((null===(n=v[a])||void 0===n?void 0:n.length)>0||(null===(t=g[a])||void 0===t?void 0:t.length)>0)&&(0,i.jsxs)("ul",{className:"mt-2 text-sm text-black space-y-2",children:[null===(r=v[a])||void 0===r?void 0:r.map((e,n)=>(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",className:"underline break-all text-blue-600",children:e.split("/").pop()}),(0,i.jsx)("button",{type:"button",onClick:()=>E(a,n),className:"text-red-500 text-xs hover:underline",children:"❌"})]},"".concat(a,"-url-").concat(n,"-").concat(e))),null===(l=g[a])||void 0===l?void 0:l.map((e,n)=>(0,i.jsx)("li",{children:e.name},"".concat(a,"-file-").concat(n,"-").concat(e.name)))]})]},a)}),(0,i.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:t,className:"text-gray-600 hover:underline",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:a?"Update":"Submit"})]})]}):null}function d(e){let{pageTitle:n,query:t,deleteMutation:d,dataKey:p,textFields:m,fileFields:f=[],formFields:x,formTitle:g,createMutation:h,editMutation:v,uploadMutation:b,deleteFileMutation:j}=e,{data:y,loading:w,refetch:k}=(0,r.aM)(t),[N]=(0,l.D)(d),C=(0,a.n)(),[D,S]=(0,s.useState)(!1),[$,E]=(0,s.useState)(null),[U,P]=(0,s.useState)(!1),[A,_]=(0,s.useState)(null),[F,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>I(window.innerWidth<=425);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let L=async e=>{await N({variables:{id:e}}),_(null),k()},W=(null==y?void 0:y[p])||[];return(0,i.jsx)("div",{className:"bg-slate-900 text-white min-h-screen pt-24 px-6 desktop:px-20",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-10 pl-4",children:n}),w&&(0,i.jsx)("p",{className:"pl-4",children:"Loading..."}),W.map(e=>(0,i.jsx)("div",{className:"group block rounded-lg p-4 transition hover:bg-slate-700 hover:-translate-x-2",children:(0,i.jsxs)("div",{className:"flex items-start gap-6",children:[(0,i.jsx)("div",{className:"pt-1 text-sm text-slate-400 leading-snug ".concat(F?"max-w-[90px]":"whitespace-nowrap"),children:(()=>{let n=m.start?e[m.start]:null,t=m.end?e[m.end]:null,r=n?c(n):null,l=t?c(t):null;return l||(r&&l?F?(0,i.jsxs)(i.Fragment,{children:[r,(0,i.jsx)("div",{className:"text-center",children:"–"}),l]}):(0,i.jsxs)(i.Fragment,{children:[r," – ",l]}):void 0)})()}),(0,i.jsxs)("div",{className:"flex-1 w-full min-w-0 space-y-2",children:[(0,i.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-white group-hover:text-cyan-300 transition",children:[e[m.title]," ",m.subtitle&&e[m.subtitle]&&(0,i.jsxs)("span",{className:"text-cyan-300",children:["@ ",e[m.subtitle]]})]}),C&&(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{className:"text-xs text-yellow-400 hover:underline",onClick:()=>{E(e),S(!0)},children:"Edit"}),(0,i.jsx)("button",{className:"text-xs text-red-400 hover:underline",onClick:()=>_(e.id),children:"Delete"})]})]}),f.length>0&&(0,i.jsxs)("div",{className:"text-sm text-cyan-400 flex flex-wrap gap-4",children:[m.program?e[m.program]:"",f.map(n=>{let{name:t,label:r,mode:l}=n,a=e[t];return a?"singleupload"===l?(0,i.jsxs)("div",{className:"text-sm text-center",children:["\uD83D\uDCDD ",(0,i.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",className:"hover:underline",children:r})]},"".concat(t,"-").concat(e.id)):"multiupload"===l&&Array.isArray(a)?a.map((n,l)=>{var a;let s=null===(a=n.split(".").pop())||void 0===a?void 0:a.toLowerCase();return/jpeg|jpg|png|gif|webp/.test(s||"")?null:(0,i.jsxs)("div",{className:"text-sm text-center",children:["\uD83D\uDCDD ",(0,i.jsxs)("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:underline",children:[r,"_",l+1]})]},"".concat(t,"-").concat(e.id,"-").concat(l))}):void 0:null})]}),m.description&&e[m.description]&&(0,i.jsx)("div",{className:"text-slate-300 text-sm space-y-1",children:e[m.description].split(RegExp("(?<=\\.)\\s+(?=-)","g")).map((e,n)=>(0,i.jsx)("p",{children:e.trim()},"desc-line-".concat(n)))}),m.tags&&e[m.tags]&&Array.isArray(e[m.tags])&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:e[m.tags].map((e,n)=>(0,i.jsx)("span",{className:"bg-teal-400/10 text-teal-300 px-3 py-1 text-xs rounded-full font-medium",children:e},"tag-".concat(e,"-").concat(n)))}),f.length>0&&(0,i.jsx)("div",{className:"pt-4 flex flex-wrap gap-4",children:f.map(n=>{let{name:t,mode:r}=n,l=e[t];return Array.isArray(l)?l.map((e,n)=>{var r;let l=null===(r=e.split(".").pop())||void 0===r?void 0:r.toLowerCase(),a=/jpeg|jpg|png|gif|webp/.test(l||"");return(/\.pdf$/i.test(e),a)?(0,i.jsx)("div",{className:"rounded overflow-hidden w-[370px] hover:shadow-xl transition-transform duration-200",children:(0,i.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",className:"block hover:scale-105 transition-transform duration-200",children:(0,i.jsx)("img",{src:e,alt:"file",className:"w-[370px] h-auto object-contain"})})},"".concat(t,"-img-").concat(n)):null}):null})})]})]})},e.id)),C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-center mt-6",children:(0,i.jsxs)("button",{onClick:()=>{S(!0),E(null)},className:"text-cyan-400 hover:underline text-sm",children:["➕ ",(null==g?void 0:g.add)||"Add item"]})}),D&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex justify-center items-center",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-xl max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:$?null==g?void 0:g.edit:null==g?void 0:g.add}),(0,i.jsx)("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-red-600 text-lg font-bold",children:"\xd7"})]}),(0,i.jsx)(u,{isOpen:!0,onClose:()=>S(!1),onSuccess:()=>{S(!1),k()},initialData:$,fields:x,fileFields:f,createMutation:h,editMutation:v,uploadMutation:b,deleteFileMutation:j})]})})]}),A&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex justify-center items-center",children:(0,i.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-lg p-6",children:[(0,i.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this item?"}),(0,i.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,i.jsx)("button",{onClick:()=>_(null),className:"text-gray-600 hover:underline",children:"No"}),(0,i.jsx)("button",{onClick:()=>L(A),className:"text-red-600 hover:underline",children:"Yes"})]})]})}),(0,i.jsx)(o.Z,{isOpen:U,onClose:()=>P(!1),onLoginSuccess:()=>P(!1)})]})})}},6965:function(e,n,t){t.d(n,{DL:function(){return C},G0:function(){return q},HT:function(){return I},Hh:function(){return O},Ir:function(){return $},Lz:function(){return S},Mh:function(){return T},QO:function(){return W},Rx:function(){return A},SJ:function(){return R},Yr:function(){return G},al:function(){return L},au:function(){return F},b$:function(){return U},dJ:function(){return z},fM:function(){return D},fW:function(){return M},kp:function(){return _},my:function(){return P},ym:function(){return E}});var i=t(5008),r=t(2559);function l(){let e=(0,i._)(["\n  query getWorkExperiences {\n    getWorkExperiences {\n      id\n      title\n      company\n      type\n      startDate\n      endDate\n      skills\n      description\n      contractFileUrl\n      feedbackFileUrl\n      demoFileUrl\n    }\n  }\n"]);return l=function(){return e},e}function a(){let e=(0,i._)(["\n  query GetProjects {\n    getProjects {\n      id\n      title\n      skills\n      description\n      category\n      projectUrl\n      createdAt\n    }\n  }\n"]);return a=function(){return e},e}function s(){let e=(0,i._)(["\n  query GetCertificates {\n    getCertificates {\n      id\n      title\n      organization\n      description\n      skills\n      dateAchieved\n      certificateFileUrl\n    }\n  }\n"]);return s=function(){return e},e}function o(){let e=(0,i._)(["\n  query GetEducations{\n    getEducations {\n      id\n      degree\n      program\n      school\n      skills\n      description\n      startDate\n      endDate\n      degreeFileUrl\n      transcriptFileUrl\n      enrollmentFileUrl\n      createdAt\n    }\n  }\n"]);return o=function(){return e},e}function c(){let e=(0,i._)(["\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return c=function(){return e},e}function u(){let e=(0,i._)(["\n  mutation SingleUpload($file: Upload!) {\n    singleUpload(file: $file)\n  }\n"]);return u=function(){return e},e}function d(){let e=(0,i._)(["\n  mutation MultiUpload($files: [Upload!]!) {\n    multiUpload(files: $files)\n  }\n"]);return d=function(){return e},e}function p(){let e=(0,i._)(["\n  mutation CreateWorkExperience($input: CreateWorkExperienceInput!) {\n    createWorkExperience(input: $input) {\n      id              \n      title           \n      company         \n      type            \n      startDate        \n      endDate         \n      skills          \n      description     \n      contractFileUrl \n      feedbackFileUrl \n      demoFileUrl         \n      createdAt         \n    }\n  }\n"]);return p=function(){return e},e}function m(){let e=(0,i._)(["\n  mutation CreateProject($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      id\n      title\n      skills\n      description\n      projectUrl\n      createdAt\n    }\n  }\n"]);return m=function(){return e},e}function f(){let e=(0,i._)(["\n  mutation CreateCertificate($input: CreateCertificateInput!) {\n    createCertificate(input: $input) {\n      id\n      title\n      organization\n      skills\n      description\n      dateAchieved\n      certificateFileUrl\n      createdAt\n    }\n  }\n"]);return f=function(){return e},e}function x(){let e=(0,i._)(["\n  mutation CreateEducation($input: CreateEducationInput!) {\n    createEducation(input: $input) {\n      id\n      degree\n      program\n      school\n      skills\n      description\n      startDate\n      endDate\n      degreeFileUrl\n      transcriptFileUrl\n      enrollmentFileUrl\n      createdAt\n    }\n  }\n"]);return x=function(){return e},e}function g(){let e=(0,i._)(["\n  mutation EditWorkExperience($id: String!, $input: CreateWorkExperienceInput!) {\n    editWorkExperience(id: $id, input: $input) {\n      id              \n      title           \n      company         \n      type            \n      startDate        \n      endDate         \n      skills          \n      description     \n      contractFileUrl \n      feedbackFileUrl \n      demoFileUrl         \n      createdAt   \n    }\n  }\n"]);return g=function(){return e},e}function h(){let e=(0,i._)(["\n  mutation EditProject($id: String!, $input: CreateProjectInput!) {\n    editProject(id: $id, input: $input) {\n      id\n      title\n      skills\n      description\n      category\n      projectUrl\n      createdAt\n    }\n  }\n"]);return h=function(){return e},e}function v(){let e=(0,i._)(["\n  mutation EditCertificate($id: String!, $input: CreateCertificateInput!) {\n    editCertificate(id: $id, input: $input) {\n      id\n      title\n      organization\n      skills\n      description\n      dateAchieved\n      certificateFileUrl\n      createdAt\n    }\n  }\n"]);return v=function(){return e},e}function b(){let e=(0,i._)(["\n  mutation EditEducation($id: String!, $input: CreateEducationInput!) {\n    editEducation(id: $id, input: $input) {\n      id\n      degree\n      program\n      school\n      skills\n      description\n      startDate\n      endDate\n      degreeFileUrl\n      transcriptFileUrl\n      enrollmentFileUrl\n      createdAt\n    }\n  }\n"]);return b=function(){return e},e}function j(){let e=(0,i._)(["\n  mutation SingleDelete($fileUrl: String!) {\n    singleDelete(fileUrl: $fileUrl)\n  }\n"]);return j=function(){return e},e}function y(){let e=(0,i._)(["\n  mutation DeleteWorkExperience($id: String!) {\n    deleteWorkExperience(id: $id)\n  }\n"]);return y=function(){return e},e}function w(){let e=(0,i._)(["\n  mutation DeleteProject($id: String!) {\n    deleteProject(id: $id)\n  }\n"]);return w=function(){return e},e}function k(){let e=(0,i._)(["\n  mutation DeleteCertificate($id: String!) {\n    deleteCertificate(id: $id)\n  }\n"]);return k=function(){return e},e}function N(){let e=(0,i._)(["\n  mutation DeleteEducation($id: String!) {\n    deleteEducation(id: $id)\n  }\n"]);return N=function(){return e},e}let C=(0,r.Ps)(l()),D=(0,r.Ps)(a()),S=(0,r.Ps)(s()),$=(0,r.Ps)(o()),E=(0,r.Ps)(c()),U=(0,r.Ps)(u()),P=(0,r.Ps)(d()),A=(0,r.Ps)(p()),_=(0,r.Ps)(m()),F=(0,r.Ps)(f()),I=(0,r.Ps)(x()),L=(0,r.Ps)(g()),W=(0,r.Ps)(h()),z=(0,r.Ps)(v()),q=(0,r.Ps)(b()),M=(0,r.Ps)(j()),O=(0,r.Ps)(y()),G=(0,r.Ps)(w()),R=(0,r.Ps)(k()),T=(0,r.Ps)(N())},8069:function(e,n,t){t.d(n,{n:function(){return a}});var i=t(2265);let r=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),l=()=>!!localStorage.getItem("app-user-token"),a=()=>(0,i.useSyncExternalStore)(r,l,()=>!1)}}]);